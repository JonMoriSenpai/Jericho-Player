<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Utilities/Class-Utils.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ClassUtils.html">ClassUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClassUtils.html#.__SearchPackageJson">__SearchPackageJson</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClassUtils.html#.__versioning">__versioning</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClassUtils.html#.HumanTimeConversion">HumanTimeConversion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClassUtils.html#.ScanDeps">ScanDeps</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClassUtils.html#.stablizingoptions">stablizingoptions</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="JerichoPlayer.html">JerichoPlayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="JerichoPlayer.html#.QueueCacheAdd">QueueCacheAdd</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="JerichoPlayer.html#.QueueCacheFetch">QueueCacheFetch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="JerichoPlayer.html#.QueueCacheRemove">QueueCacheRemove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="JerichoPlayer.html#CreateQueue">CreateQueue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="JerichoPlayer.html#DeleteQueue">DeleteQueue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="JerichoPlayer.html#GetQueue">GetQueue</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Queue.html">Queue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#autoplay">autoplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#back">back</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#createProgressBar">createProgressBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#insert">insert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#loop">loop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#mute">mute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#pause">pause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#play">play</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#repeat">repeat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#resume">resume</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#search">search</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#skip">skip</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#stop">stop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Queue.html#unmute">unmute</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="StreamPacketGen.html">StreamPacketGen</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StreamPacketGen.html#__handleMusicPlayerModes">__handleMusicPlayerModes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StreamPacketGen.html#back">back</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StreamPacketGen.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StreamPacketGen.html#insert">insert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StreamPacketGen.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StreamPacketGen.html#setMode">setMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StreamPacketGen.html#StreamAudioResourceExtractor">StreamAudioResourceExtractor</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TrackGenerator.html">TrackGenerator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TrackGenerator.html#.fetch">fetch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TrackGenerator.html#.PlayDLExtractor">PlayDLExtractor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TrackGenerator.html#.SongsFetching">SongsFetching</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TrackGenerator.html#.Track_Id_Placement">Track_Id_Placement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TrackGenerator.html#.UserTrackModelGen">UserTrackModelGen</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TrackGenerator.html#.YoutubeDLExtractor">YoutubeDLExtractor</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="VoiceUtils.html">VoiceUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VoiceUtils.html#.disconnect">disconnect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VoiceUtils.html#.join">join</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Utilities/Class-Utils.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { resolve, dirname } = require('path');
const { FFmpeg } = require('prism-media');

/**
 * @class ClassUtils -> Class Util's methods are for Class's Support and helping basic or extract support neccassity tools
 */
class ClassUtils {
  /**
   * stablizingoptions() -> Stabilizing Local and Parent Options with accuracy 80%
   * @param {Object} Local Local function/method options
   * @param {Object} Parent Parent function/method options
   * @returns {Object} Finaliize Options
   */

  static stablizingoptions(Local, Parent) {
    if (!Local) return Parent;
    if (!Parent) return Local;
    const ProcessOptions = {};
    const Options = Object.keys(Local).length > Object.keys(Parent).length
      ? Object.keys(Local)
      : Object.keys(Parent);
    for (let count = 0, len = Options.length; count &lt; len; ++count) {
      ProcessOptions[Options[count]] = (typeof Local[Options[count]] === 'object'
        &amp;&amp; Local[Options[count]] !== undefined
        &amp;&amp; Parent[Options[count]] !== undefined
        &amp;&amp; Local[Options[count]]
        &amp;&amp; !Local[Options[count]][0]
        ? ClassUtils.stablizingoptions(
          Local[Options[count]],
          Parent[Options[count]],
        )
        : undefined)
        ?? (Local[Options[count]] === undefined
          ? Parent[Options[count]]
          : Local[Options[count]]);
    }
    return ProcessOptions;
  }

  /**
   * ScanDeps() -> Scanning Dependencies in package.json or node_modules for package or versions list
   * @param {String|undefined} packageName Package name for publishing it sversion in project
   * @returns {String|undefined} Publish Data whaich was requested for
   */

  static ScanDeps(packageName) {
    if (!packageName) {
      const report = [];
      const addVersion = (name) => report.push(
        `- ${name}: ${ClassUtils.__versioning(name) ?? 'not found'}`,
      );
      // general
      report.push('Core Dependencies');
      addVersion('@discordjs/voice');
      addVersion('prism-media');
      report.push('');

      // opus
      report.push('Opus Libraries');
      addVersion('@discordjs/opus');
      addVersion('opusscript');
      report.push('');

      // encryption
      report.push('Encryption Libraries');
      addVersion('sodium');
      addVersion('libsodium-wrappers');
      addVersion('tweetnacl');
      report.push('');

      // ffmpeg
      report.push('FFmpeg');
      try {
        const info = FFmpeg.getInfo();
        report.push(`- version: ${info.version}`);
        report.push(
          `- libopus: ${
            info.output.includes('--enable-libopus') ? 'yes' : 'no'
          }`,
        );
      } catch (err) {
        report.push('- not found');
      }
      addVersion('ffmpeg-static');
      report.push('');

      // Extractors
      report.push('Extractors');
      addVersion('playdl-music-extractor');
      addVersion('video-extractor');

      return ['-'.repeat(50), ...report, '-'.repeat(50)].join('\n');
    }
    return (
      ClassUtils.__versioning(packageName)
      ?? ClassUtils.__versioning(packageName.toLowerCase().trim())
    );
  }

  /**
   * @private __versioning() -> Searching Versions of Packages
   * @param {String} name NPM Package Name
   * @returns {String|undefined} Returns Package Version
   */

  static __versioning(name) {
    try {
      const pkg = name === '@discordjs/voice'
        ? require('../../package.json')
        : ClassUtils.__SearchPackageJson(
          dirname(require.resolve(name)),
          name,
          8,
        );
      return pkg?.version ?? undefined;
    } catch (err) {
      return undefined;
    }
  }
  /**
   * @private __SearchPackageJson() -> Searching Every package.json with deps
   * @param {String} dir Directory name | value
   * @param {String} packageName NPM Package Name
   * @param {Number} depth Depth to go in Directories or outward
   * @returns {Object} pacakge.json file with accurate versions
   */

  static __SearchPackageJson(dir, packageName, depth) {
    if (depth === 0) return undefined;
    const attemptedPath = resolve(dir, './package.json');
    try {
      const pkg = require(attemptedPath);
      if (pkg.name !== packageName) throw new Error('package.json does not match');
      return pkg;
    } catch (err) {
      return ClassUtils.__SearchPackageJson(
        resolve(dir, '..'),
        packageName,
        depth - 1,
      );
    }
  }

  /**
   * HumanTimeConversion() -> Human Time Conversion Function with two categories
   * @param {String|Number|undefined} Type1 Convert Milliseconds to Human Time Language
   * @param {Object[]|undefined} Type2 Convert Milliseconds to Human Time variables
   * @returns {String|undefined} Returns String with desired value
   */

  static HumanTimeConversion(Type1 = undefined, Type2 = undefined) {
    if (Type1) {
      const DurationMilliSeconds = Type1 / 1000;
      let ProcessedString = '';
      for (
        let DurationArray = [
            [Math.floor(DurationMilliSeconds / 31536e3), 'Years'],
            [Math.floor((DurationMilliSeconds % 31536e3) / 86400), 'Days'],
            [
              Math.floor(((DurationMilliSeconds % 31536e3) % 86400) / 3600),
              'Hours',
            ],
            [
              Math.floor(
                (((DurationMilliSeconds % 31536e3) % 86400) % 3600) / 60,
              ),
              'Minutes',
            ],
            [
              Math.floor(
                (((DurationMilliSeconds % 31536e3) % 86400) % 3600) % 60,
              ),
              'Seconds',
            ],
          ],
          SideArray = 0,
          GarbageValue = DurationArray.length;
        SideArray &lt; GarbageValue;
        SideArray++
      ) {
        DurationArray[SideArray][0] !== 0
          &amp;&amp; (ProcessedString += ` ${DurationArray[SideArray][0]} ${
            DurationArray[SideArray][0] === 1
              ? DurationArray[SideArray][1].substr(
                0,
                DurationArray[SideArray][1].length - 1,
              )
              : DurationArray[SideArray][1]
          }`);
      }
      return ProcessedString.trim();
    }
    if (Type2) {
      const TimeData = new Date(Number(Type2.Time));
      const days = TimeData.getUTCDate() - 1;
      const hours = TimeData.getUTCHours();
      const minutes = TimeData.getUTCMinutes();
      const seconds = TimeData.getUTCSeconds();
      const milliseconds = TimeData.getUTCMilliseconds();

      const TimeString = [];
      if (days) TimeString.push(days);
      if (hours &amp;&amp; !Type2.ignore.includes('hour')) TimeString.push(hours &lt; 10 &amp;&amp; days > 0 ? `0${hours}` : hours);
      !Type2.ignore.includes('min')
        ? TimeString.push(minutes &lt; 10 ? `0${minutes}` : minutes)
        : undefined;
      !Type2.ignore.includes('sec')
        ? TimeString.push(seconds &lt; 10 ? `0${seconds}` : seconds)
        : undefined;
      !Type2.ignore.includes('milliseconds')
        ? TimeString.push(milliseconds &lt; 10 ? `0${milliseconds}` : milliseconds)
        : undefined;
      return TimeString.join(':');
    }
    return '0 Seconds';
  }
}

module.exports = ClassUtils;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Sat Nov 06 2021 13:37:39 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
