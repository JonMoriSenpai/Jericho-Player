<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: Utilities/ClassUtils.js</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/nav.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/skyceil.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
</head>

<body>

<nav class="navbar">
    <h4><a href="index.html">Home</a></h4><h5 class="no-bottom must-underline">Classes</h5><ul><li><span class="small-icon C">C</span><b><a href="ClassUtils.html">ClassUtils</a></b><ul class="has-class-methods"><li><span class="small-icon F">F</span><a href="ClassUtils.html#.AudioFiltersConverter">AudioFiltersConverter</a></li><li><span class="small-icon F">F</span><a href="ClassUtils.html#.HumanTimeConversion">HumanTimeConversion</a></li><li><span class="small-icon F">F</span><a href="ClassUtils.html#.isUriCheck">isUriCheck</a></li><li><span class="small-icon F">F</span><a href="ClassUtils.html#.ScanDeps">ScanDeps</a></li><li><span class="small-icon F">F</span><a href="ClassUtils.html#.stablizingoptions">stablizingoptions</a></li><li><span class="small-icon F">F</span><a href="ClassUtils.html#.TimeWait">TimeWait</a></li></ul></li><li><span class="small-icon C">C</span><b><a href="Player.html">Player</a></b><ul class="has-class-methods"><li><span class="small-icon F">F</span><a href="Player.html#CreateQueue">CreateQueue</a></li><li><span class="small-icon F">F</span><a href="Player.html#DeleteQueue">DeleteQueue</a></li><li><span class="small-icon F">F</span><a href="Player.html#GetQueue">GetQueue</a></li><li><span class="small-icon M">M</span><a href="Player.html#Client">Client</a></li><li><span class="small-icon M">M</span><a href="Player.html#JerichoPlayerOptions">JerichoPlayerOptions</a></li></ul></li><li><span class="small-icon C">C</span><b><a href="Queue.html">Queue</a></b><ul class="has-class-methods"><li><span class="small-icon F">F</span><a href="Queue.html#autoplay">autoplay</a></li><li><span class="small-icon F">F</span><a href="Queue.html#back">back</a></li><li><span class="small-icon F">F</span><a href="Queue.html#clear">clear</a></li><li><span class="small-icon F">F</span><a href="Queue.html#createProgressBar">createProgressBar</a></li><li><span class="small-icon F">F</span><a href="Queue.html#destroy">destroy</a></li><li><span class="small-icon F">F</span><a href="Queue.html#insert">insert</a></li><li><span class="small-icon F">F</span><a href="Queue.html#loop">loop</a></li><li><span class="small-icon F">F</span><a href="Queue.html#mute">mute</a></li><li><span class="small-icon F">F</span><a href="Queue.html#pause">pause</a></li><li><span class="small-icon F">F</span><a href="Queue.html#play">play</a></li><li><span class="small-icon F">F</span><a href="Queue.html#playTracks">playTracks</a></li><li><span class="small-icon F">F</span><a href="Queue.html#remove">remove</a></li><li><span class="small-icon F">F</span><a href="Queue.html#repeat">repeat</a></li><li><span class="small-icon F">F</span><a href="Queue.html#resume">resume</a></li><li><span class="small-icon F">F</span><a href="Queue.html#search">search</a></li><li><span class="small-icon F">F</span><a href="Queue.html#seek">seek</a></li><li><span class="small-icon F">F</span><a href="Queue.html#setFilters">setFilters</a></li><li><span class="small-icon F">F</span><a href="Queue.html#shuffle">shuffle</a></li><li><span class="small-icon F">F</span><a href="Queue.html#skip">skip</a></li><li><span class="small-icon F">F</span><a href="Queue.html#stop">stop</a></li><li><span class="small-icon F">F</span><a href="Queue.html#unmute">unmute</a></li><li><span class="small-icon M">M</span><a href="Queue.html#Client">Client</a></li><li><span class="small-icon M">M</span><a href="Queue.html#current">current</a></li><li><span class="small-icon M">M</span><a href="Queue.html#currentTimestamp">currentTimestamp</a></li><li><span class="small-icon M">M</span><a href="Queue.html#destroyed">destroyed</a></li><li><span class="small-icon M">M</span><a href="Queue.html#disabledFilters">disabledFilters</a></li><li><span class="small-icon M">M</span><a href="Queue.html#enabledFilters">enabledFilters</a></li><li><span class="small-icon M">M</span><a href="Queue.html#filters">filters</a></li><li><span class="small-icon M">M</span><a href="Queue.html#guildId">guildId</a></li><li><span class="small-icon M">M</span><a href="Queue.html#message">message</a></li><li><span class="small-icon M">M</span><a href="Queue.html#metadata">metadata</a></li><li><span class="small-icon M">M</span><a href="Queue.html#MusicPlayer">MusicPlayer</a></li><li><span class="small-icon M">M</span><a href="Queue.html#paused">paused</a></li><li><span class="small-icon M">M</span><a href="Queue.html#Player">Player</a></li><li><span class="small-icon M">M</span><a href="Queue.html#playerMode">playerMode</a></li><li><span class="small-icon M">M</span><a href="Queue.html#playing">playing</a></li><li><span class="small-icon M">M</span><a href="Queue.html#previousTrack">previousTrack</a></li><li><span class="small-icon M">M</span><a href="Queue.html#StreamPacket">StreamPacket</a></li><li><span class="small-icon M">M</span><a href="Queue.html#tracks">tracks</a></li><li><span class="small-icon M">M</span><a href="Queue.html#volume">volume</a></li></ul></li><li><span class="small-icon C">C</span><b><a href="VoiceUtils.html">VoiceUtils</a></b><ul class="has-class-methods"><li><span class="small-icon F">F</span><a href="VoiceUtils.html#.disconnect">disconnect</a></li><li><span class="small-icon F">F</span><a href="VoiceUtils.html#.join">join</a></li></ul></li></ul><h4>Global</h4><ul><li><a href="global.html#TrackGenerator.">TrackGenerator.</a></li></ul>
</nav>

<div id="main">
    <div class="burger">
        <div class="burger-line-1"></div>
        <div class="burger-line-2"></div>
        <div class="burger-line-3"></div>
    </div>

    <h1 class="page-title">Source: Utilities/ClassUtils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { resolve, dirname } = require('path');
const { FFmpeg } = require('prism-media');
const {
  DefaultUserDrivenAudioFilters,
  DefaultAudioFilters,
} = require('../types/interfaces');

/**
 * @class ClassUtils -> Class Util's methods are for Class's Support and helping basic or extract support neccassity tools
 */
class ClassUtils {
  /**
   * stablizingoptions() -> Stabilizing Local and Parent Options with accuracy 80%
   * @param {Object} Local Local function/method options
   * @param {Object} Parent Parent function/method options
   * @returns {Object} Finalized Options with Structure or Array Types
   */

  static stablizingoptions(Local, Parent) {
    if (!Local || typeof Local !== 'object') return Parent;
    if (!Parent || typeof Parent !== 'object') return Local;
    const ProcessOptions = {};
    const LocalObjects = Object.keys(Local);
    const ParentObjects = Object.keys(Parent);
    const Options = LocalObjects.length > ParentObjects.length ? LocalObjects : ParentObjects;
    for (let count = 0, len = Options.length; count &lt; len; ++count) {
      if (
        typeof Local[Options[count]] === 'object'
        &amp;&amp; Local[Options[count]] !== undefined
        &amp;&amp; Parent[Options[count]] !== undefined
        &amp;&amp; Local[Options[count]]
        &amp;&amp; !Array.isArray(Local[Options[count]])
      ) {
        ProcessOptions[Options[count]] = ClassUtils.stablizingoptions(
          Local[Options[count]],
          Parent[Options[count]],
        );
      } else if (Local[Options[count]] === undefined) ProcessOptions[Options[count]] = Parent[Options[count]];
      else ProcessOptions[Options[count]] = Local[Options[count]];
    }
    return ProcessOptions;
  }

  /**
   * ScanDeps() -> Scanning Dependencies in package.json or node_modules for package or versions list
   * @param {String|void} packageName Package name for publishing it versions in project
   * @returns {String|void} Publish Data which was requested for like checks and versions
   */

  static ScanDeps(packageName) {
    if (!packageName) {
      const report = [];
      const addVersion = (name) => report.push(
        `- ${name}: ${ClassUtils.__versioning(name) ?? 'not found'}`,
      );
      // general
      report.push('Core Dependencies');
      addVersion('@discordjs/voice');
      addVersion('prism-media');
      report.push('');

      // opus
      report.push('Opus Libraries');
      addVersion('@discordjs/opus');
      addVersion('opusscript');
      report.push('');

      // encryption
      report.push('Encryption Libraries');
      addVersion('sodium');
      addVersion('libsodium-wrappers');
      addVersion('tweetnacl');
      report.push('');

      // ffmpeg
      report.push('FFmpeg');
      try {
        const info = FFmpeg.getInfo();
        report.push(`- version: ${info.version}`);
        report.push(
          `- libopus: ${
            info.output.includes('--enable-libopus') ? 'yes' : 'no'
          }`,
        );
      } catch (err) {
        report.push('- not found');
      }
      addVersion('ffmpeg-static');
      report.push('');

      // Extractors
      report.push('Extractors');
      addVersion('playdl-music-extractor');
      addVersion('video-extractor');

      return ['-'.repeat(50), ...report, '-'.repeat(50)].join('\n');
    }
    return (
      ClassUtils.__versioning(packageName)
      ?? ClassUtils.__versioning(packageName.toLowerCase().trim())
    );
  }

  /**
   * @private __versioning() -> Searching Versions of Packages
   * @param {String} name NPM Package Name
   * @returns {String|void} Returns Package Version
   */

  static __versioning(name) {
    try {
      const pkg = name === '@discordjs/voice'
        ? require('../../package.json')
        : ClassUtils.__SearchPackageJson(
          dirname(require.resolve(name)),
          name,
          8,
        );
      return pkg?.version ?? undefined;
    } catch (err) {
      return undefined;
    }
  }
  /**
   * @private __SearchPackageJson() -> Searching Every package.json with deps
   * @param {String} dir Directory name | value
   * @param {String} packageName NPM Package Name
   * @param {Number} depth Depth to go in Directories or outward
   * @returns {Object} pacakge.json file with accurate versions
   */

  static __SearchPackageJson(dir, packageName, depth) {
    if (depth === 0) return undefined;
    const attemptedPath = resolve(dir, './package.json');
    try {
      const pkg = require(attemptedPath);
      if (pkg.name !== packageName) throw new Error('package.json does not match');
      return pkg;
    } catch (err) {
      return ClassUtils.__SearchPackageJson(
        resolve(dir, '..'),
        packageName,
        depth - 1,
      );
    }
  }

  /**
   * HumanTimeConversion() -> Human Time Conversion Function with two categories
   * @param {String|Number|void} Type1 Convert Milliseconds to Human Time Language
   * @param {Object[]|void} Type2 Convert Milliseconds to Human Time variables
   * @param {String|void} Type3 Convert Standared hh:mm:ss to Seconds Data
   * @returns {String|void} Returns String with desired value
   */

  static HumanTimeConversion(
    Type1 = undefined,
    Type2 = undefined,
    Type3 = undefined,
  ) {
    if (Type1) {
      const DurationMilliSeconds = Type1 / 1000;
      let ProcessedString = '';
      for (
        let DurationArray = [
            [Math.floor(DurationMilliSeconds / 31536e3), 'Years'],
            [Math.floor((DurationMilliSeconds % 31536e3) / 86400), 'Days'],
            [
              Math.floor(((DurationMilliSeconds % 31536e3) % 86400) / 3600),
              'Hours',
            ],
            [
              Math.floor(
                (((DurationMilliSeconds % 31536e3) % 86400) % 3600) / 60,
              ),
              'Minutes',
            ],
            [
              Math.floor(
                (((DurationMilliSeconds % 31536e3) % 86400) % 3600) % 60,
              ),
              'Seconds',
            ],
          ],
          SideArray = 0,
          GarbageValue = DurationArray.length;
        SideArray &lt; GarbageValue;
        SideArray++
      ) {
        DurationArray[SideArray][0] !== 0
          &amp;&amp; (ProcessedString += ` ${DurationArray[SideArray][0]} ${
            DurationArray[SideArray][0] === 1
              ? DurationArray[SideArray][1].substr(
                0,
                DurationArray[SideArray][1].length - 1,
              )
              : DurationArray[SideArray][1]
          }`);
      }
      return ProcessedString.trim();
    }
    if (Type2) {
      const TimeData = new Date(Number(Type2.Time));
      const days = TimeData.getUTCDate() - 1;
      const hours = TimeData.getUTCHours();
      const minutes = TimeData.getUTCMinutes();
      const seconds = TimeData.getUTCSeconds();
      const milliseconds = TimeData.getUTCMilliseconds();

      const TimeString = [];
      if (days) TimeString.push(days);
      if (hours &amp;&amp; !Type2.ignore.includes('hour')) TimeString.push(hours &lt; 10 &amp;&amp; days > 0 ? `0${hours}` : hours);
      !Type2.ignore.includes('min')
        ? TimeString.push(minutes &lt; 10 ? `0${minutes}` : minutes)
        : undefined;
      !Type2.ignore.includes('sec')
        ? TimeString.push(seconds &lt; 10 ? `0${seconds}` : seconds)
        : undefined;
      !Type2.ignore.includes('milliseconds')
        ? TimeString.push(milliseconds &lt; 10 ? `0${milliseconds}` : milliseconds)
        : undefined;
      return TimeString.join(':');
    }
    if (Type3) {
      const TimeArray = typeof Type3 === 'string' ? Type3.split(':') : Type3;
      let milliseconds = 0;
      let GarbageValue = 1;

      while (TimeArray.length > 0) {
        milliseconds += GarbageValue * parseInt(TimeArray.pop(), 10);
        GarbageValue *= 60;
      }

      return milliseconds;
    }
    return '0 Seconds';
  }

  /**
   * @static
   * FiltersConverter() -> Converter for AudioFilters (private function , but making public for if moments)
   * @param {String[]|Object} FiltersArray
   */
  static AudioFiltersConverter(FiltersArray) {
    if (FiltersArray &amp;&amp; FiltersArray[0]) {
      const ObjectKeys = Object.keys(DefaultAudioFilters);
      for (let count = 0, len = ObjectKeys.length; count &lt; len; count++) {
        if (
          DefaultAudioFilters[`${ObjectKeys[count]}`]
          &amp;&amp; FiltersArray.includes(
            DefaultAudioFilters[`${ObjectKeys[count]}`].trim(),
          )
        ) DefaultUserDrivenAudioFilters[`${ObjectKeys[count]}`] = true;
      }
      return DefaultUserDrivenAudioFilters;
    }
    const Filterkeys = Object.keys(FiltersArray);
    const CacheArray = [];
    for (let count = 0, len = Filterkeys.length; count &lt; len; count++) {
      if (
        DefaultAudioFilters[`${Filterkeys[count]}`]
        &amp;&amp; FiltersArray[`${Filterkeys[count]}`]
      ) {
        CacheArray.push(`${DefaultAudioFilters[`${Filterkeys[count]}`].trim()}`);
      }
    }
    return CacheArray;
  }

  /**
   * @static
   * Wait for Milliseconds for Delay between processes
   * @param {Number|String|void} Milliseconds Time in Milliseconds
   * @returns {Promise&lt;void>} return undefined for no return
   */
  static async TimeWait(Milliseconds = 1000) {
    return await new Promise((resolve) => setTimeout(resolve, Number(Milliseconds)));
  }

  /**
   * @static
   * Checks for Valid Url and returns Boolean Results
   * @param {String} Url Raw url for Url Checks
   * @return {Promise&lt;Boolean>} returns undefined on completion
   */
  static async isUriCheck(Url) {
    if (!Url || (Url &amp;&amp; typeof Url !== 'string')) {
      return false;
    }
    const ProtocolAndDomainRegEx = /^(?:\w+:)?\/\/(\S+)$/;
    const LocalHostDomainRegEx = /^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/;
    const NonLocalHostDomainRegEx = /^[^\s\.]+\.\S{2,}$/;
    const SearchMatchResults = Url.match(ProtocolAndDomainRegEx);
    if (!SearchMatchResults || (SearchMatchResults &amp;&amp; !SearchMatchResults[1])) {
      return false;
    }
    if (
      LocalHostDomainRegEx.test(SearchMatchResults[1])
      || NonLocalHostDomainRegEx.test(SearchMatchResults[1])
    ) {
      return true;
    }
    return false;
  }
}

module.exports = ClassUtils;
</code></pre>
        </article>
    </section>





</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Dec 23 2021 13:23:10 GMT+0000 (Coordinated Universal Time) using <a href="https://github.com/zyrouge/jsdoc-skyceil">Skyceil Theme</a>
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>

</body>
</html>
